<template id="weather-info">
  <h1>
    <img>
    Weather in <span id="city"></span>:
  </h1>
  <p>
    <span id="temperature"></span> - <span id="description"></span>
  </p>
</template>

<script>
  const tpl = (document.currentScript || document._currentScript).ownerDocument.querySelector('template').content

  class WeatherInfo extends HTMLElement {

    static get observedAttributes() {
      return [ 'city', 'imperial' ]
    }

    get city() { return this.getAttribute('city') }
    set city(newCity) { this.setAttribute('city', newCity) }

    get imperial() { return this.hasAttribute('imperial') }
    set imperial(isImperial) {
      if(isImperial) {
        this.setAttribute('imperial', '')
      } else {
        this.removeAttribute('imperial')
      }
    }

    attributeChangedCallback(name, oldVal, newVal) {
      //this.update()
    }

    connectedCallback() {
      this.attachShadow({ mode: 'open' })
      const content = document.importNode(tpl, true)
      this.shadowRoot.appendChild(content)

      //this.update()
    }

  }

  customElements.define('weather-info', WeatherInfo)
</script>
